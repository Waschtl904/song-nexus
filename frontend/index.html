<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="üéµ SONG-NEXUS ‚Äì Kostenlose, werbefreie Musikstreaming-Plattform. Keine Cookies, kein Tracking, reine Audio-Qualit√§t.">
    <meta name="keywords" content="musik streaming, kostenlos, keine werbung, datenschutz, open source">
    <meta name="theme-color" content="#0a0e1a">
    <meta name="color-scheme" content="dark light">

    <!-- Open Graph (Social Sharing) -->
    <meta property="og:title" content="üéµ SONG-NEXUS ‚Äì Kostenlose Musikstreaming">
    <meta property="og:description"
        content="H√∂re Musik frei, ohne Werbung, ohne Cookies, ohne Tracking. Barrierefreie Streaming-Plattform.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://song-nexus.com">
    <meta property="og:image"
        content="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'><rect fill='%230a0e1a' width='200' height='200'/><text x='50%' y='50%' font-size='100' fill='%2300ff00' text-anchor='middle' dy='.3em'>‚ô™</text></svg>">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="üéµ SONG-NEXUS ‚Äì Musikstreaming">
    <meta name="twitter:description" content="Musik frei h√∂ren, ohne Werbung, ohne Tracking.">

    <!-- Canonical URL (f√ºr SEO) -->
    <link rel="canonical" href="https://song-nexus.com">

    <!-- Performance: Preconnect zu Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Performance: DNS Prefetch f√ºr API -->
    <link rel="dns-prefetch" href="https://api.paypal.com">

    <!-- ‚úÖ Performance: Preload optimierte Bilder (WebP + JPEG) -->
    <link rel="preload" as="image" href="./assets/images/Hintergrundbild 1.webp" type="image/webp">
    <link rel="preload" as="image" href="./assets/images/Hintergrundbild 1.jpeg" type="image/jpeg">

    <title>üéµ SONG-NEXUS ‚Äì Musikstreaming-Plattform</title>

    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='75' font-size='75' fill='%2300ff00'>‚ô™</text></svg>">

    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Orbitron:wght@700;900&display=swap"
        rel="stylesheet">

    <!-- ‚úÖ CSS - KORREKT VERLINKT -->
    <link rel="stylesheet" href="/styles/index.css">

    <!-- ‚úÖ DESIGN-TOKENS CSS (Generated by Webpack) -->
    <!--link rel="stylesheet" href="/styles/_design-tokens.css"-->

    <!-- üé® DESIGN-SYSTEM STYLES (wird dynamisch geladen) -->
    <style id="design-system-styles">
        /* Design-System Farben & Bilder werden hier injiziert */
    </style>
</head>

<body>
    <!-- ‚úÖ OPTIMIERTES HERO-HINTERGRUNDBILD MIT PICTURE ELEMENT -->
    <div id="heroBackground" class="hero-background-container" role="img" aria-label="Cyberpunk Musik Hintergrund">
        <picture>
            <source srcset="./assets/images/Hintergrundbild 1.webp" type="image/webp">
            <source srcset="./assets/images/Hintergrundbild 1.jpeg" type="image/jpeg">
            <img src="./assets/images/Hintergrundbild 1.jpeg"
                alt="Cyberpunk Stadt Hintergrund - Neon und Stadt-Szenerie" class="hero-background-image" loading="lazy"
                decoding="async">
        </picture>
    </div>

    <!-- ========================================================================
         üéµ STICKY PLAYER (Always visible bottom-right)
         ======================================================================== -->
    <div id="stickyPlayer" class="sticky-player" data-draggable>
        <div class="player-header" id="playerHeader">
            <div class="now-playing">
                <div class="track-name">Bereit zum Abspielen...</div>
                <div class="track-artist">W√§hlen Sie einen Track</div>
            </div>
            <div class="player-controls-header">
                <button id="playerMinimize" class="player-btn" aria-label="Player minimieren"
                    title="Minimieren">‚àí</button>
                <button id="playerClose" class="player-btn" aria-label="Player schlie√üen" title="Schlie√üen">‚úï</button>
            </div>
        </div>

        <div id="playerContent" class="player-content">
            <!-- Waveform Visualizer -->
            <canvas id="playerWaveform" class="waveform" aria-hidden="true" width="300" height="60"></canvas>

            <!-- Time Display -->
            <div class="time-display">
                <span id="playerCurrentTime" aria-live="polite">0:00</span>
                <div id="playerSeekBar" class="seek-bar" role="slider" aria-label="Track-Position" aria-valuemin="0"
                    aria-valuemax="100" aria-valuenow="0" tabindex="0">
                </div>
                <span id="playerDuration" aria-label="Gesamtdauer">0:00</span>
            </div>

            <!-- Preview Badge -->
            <div id="previewBadge" class="preview-badge" style="display: none;" role="alert">
                üì¢ 40s VORSCHAU ‚Ä¢ Kaufen zum Freischalten
            </div>

            <!-- Controls -->
            <div class="player-controls">
                <button id="playerPlayBtn" class="btn-control" aria-label="Abspielen" title="Abspielen">‚ñ∂Ô∏è</button>
                <button id="playerPauseBtn" class="btn-control" style="display: none;" aria-label="Pausieren"
                    title="Pausieren">‚è∏Ô∏è</button>
                <button id="playerStopBtn" class="btn-control" aria-label="Stoppen" title="Stoppen">‚èπÔ∏è</button>
                <button id="playerLoopBtn" class="btn-control" aria-label="Schleife" title="Schleife">üîÑ</button>
                <button id="playerMuteBtn" class="btn-control" aria-label="Stummschalten"
                    title="Stummschalten">üîä</button>
            </div>

            <!-- Volume Slider -->
            <div class="volume-control">
                <label for="playerVolumeSlider" class="volume-label">Lautst√§rke:</label>
                <input id="playerVolumeSlider" type="range" min="0" max="100" value="80" class="volume-slider"
                    aria-label="Lautst√§rkeregler" aria-valuemin="0" aria-valuemax="100">
            </div>
        </div>

        <!-- ‚úÖ Resize Handle (unten rechts) -->
        <div class="player-resize-handle" id="playerResizeHandle" aria-label="Player vergr√∂√üern/verkleinern"></div>
    </div>

    <!-- ========================================================================
         HEADER
         ======================================================================== -->
    <header role="banner">
        <div class="header-content">
            <div class="logo-section">
                <h1 id="neonSign">‚ô™ SONG-NEXUS</h1>
                <div class="neon-grime" style="
                    position: absolute;
                    top: -10px;
                    left: 0;
                    width: 100%;
                    height: 120%;
                    pointer-events: none;
                    background: radial-gradient(circle at 30% 40%, rgba(0,0,0,0.25), transparent),
                                radial-gradient(circle at 70% 60%, rgba(0,0,0,0.2), transparent),
                                radial-gradient(circle at 20% 80%, rgba(80,40,0,0.15), transparent);
                    filter: blur(8px);
                "></div>
                <p class="subtitle"></p>
            </div>
            <div class="header-actions">
                <button class="theme-toggle" id="themeToggle" aria-label="Dunkelmodus / Hellmodus umschalten"
                    aria-pressed="true">üåô</button>
                <div id="userInfo" class="user-info" style="display: none;" role="complementary">
                    <span id="userDisplay">üë§ Benutzer</span>
                    <button class="button button-sm" id="logoutBtn" aria-label="Abmelden">Abmelden</button>
                </div>
                <button id="authButton" class="button button-sm" aria-label="Anmeldung √∂ffnen">Anmelden</button>
            </div>
        </div>
    </header>

    <!-- ========================================================================
         MAIN CONTENT
         ======================================================================== -->
    <main class="container" role="main">

        <!-- ====================================================================
             üé¨ HERO SECTION
             ==================================================================== -->
        <section class="hero" aria-labelledby="hero-heading">
            <div class="hero-content">
                <h2 id="hero-heading">Willkommen bei SONG-NEXUS</h2>
                <p class="hero-subtitle">
                    üéµ Musikstreaming ohne Werbung, ohne Cookies, ohne Tracking.<br>
                    <strong>Optional anmelden f√ºr pers√∂nliche Funktionen.</strong>
                </p>
                <div class="hero-features" role="list">
                    <span class="feature" role="listitem"></span>
                    <span class="feature" role="listitem"></span>
                    <span class="feature" role="listitem"></span>
                    <span class="feature" role="listitem"></span>
                </div>
            </div>
        </section>

        <!-- ====================================================================
             üîê OPTIONAL AUTH MODAL
             ==================================================================== -->
        <div id="authModal" class="modal" style="display: none;" role="dialog" aria-labelledby="auth-modal-title"
            aria-modal="true">
            <div class="modal-content">
                <button class="modal-close" aria-label="Authentifizierungsmodal schlie√üen">&times;</button>
                <h2 id="auth-modal-title">üîê Authentifizierung</h2>
                <p style="color: var(--text-secondary); font-size: 0.9rem;">
                    Optional: Melden Sie sich an, um Verlauf, Wiedergabelisten und Premium-Funktionen zu nutzen.
                </p>

                <!-- Tabs -->
                <div class="tabs" role="tablist">
                    <button class="tab-btn active" data-tab="webauthn" aria-selected="true" role="tab"
                        aria-controls="webauthn-tab" id="tab-webauthn">üëÜ Fingerabdruck</button>
                    <button class="tab-btn" data-tab="password" aria-selected="false" role="tab"
                        aria-controls="password-tab" id="tab-password">üîë Passwort</button>
                    <button class="tab-btn" data-tab="magic-link" aria-selected="false" role="tab"
                        aria-controls="magic-link-tab" id="tab-magic">üìß E-Mail</button>
                </div>

                <!-- WebAuthn Tab -->
                <div id="webauthn-tab" class="tab-content active" role="tabpanel" aria-labelledby="tab-webauthn">
                    <div style="text-align: center; padding: 20px 0;">
                        <button class="button" id="webauthnBtn" aria-label="Mit Fingerabdruck anmelden">üëÜ Fingerabdruck
                            verwenden</button>
                        <p style="color: var(--text-secondary); margin-top: 12px; font-size: 0.85rem;">
                            Erste Anmeldung? <a href="#" id="toggleBioRegisterBtn"
                                style="color: var(--accent-teal); cursor: pointer;">Mit Fingerabdruck registrieren</a>
                        </p>
                        <div id="bioRegisterModal"
                            style="display: none; margin-top: 16px; padding: 16px; border: 1px solid var(--accent-teal); border-radius: 4px;">
                            <h3 style="color: var(--accent-teal); margin-bottom: 12px;">üìù Registrierung</h3>
                            <input type="text" id="bioRegUsername" placeholder="Benutzername" class="form-control"
                                aria-label="Benutzername">
                            <input type="email" id="bioRegEmail" placeholder="E-Mail" class="form-control"
                                aria-label="E-Mail-Adresse">
                            <button class="button" id="registerBiometricBtn"
                                style="width: 100%; margin-top: 12px;">Registrieren</button>
                        </div>
                        <div id="bioStatus" class="status-message" role="alert" aria-live="polite"></div>
                    </div>
                </div>

                <!-- PASSWORD LOGIN/REGISTER TAB -->
                <div id="password-tab" class="tab-content" role="tabpanel" aria-labelledby="tab-password">
                    <!-- LOGIN FORM (Default) -->
                    <div id="passwordLoginForm">
                        <form id="passwordLoginFormElement" data-form="password-login" novalidate>
                            <div class="form-group">
                                <label for="loginEmail">E-Mail oder Benutzername</label>
                                <input type="text" id="loginEmail" placeholder="ihre@email.com oder benutzername"
                                    required class="form-control" aria-required="true">
                            </div>
                            <div class="form-group">
                                <label for="loginPassword">Passwort</label>
                                <input type="password" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required
                                    class="form-control" aria-required="true">
                            </div>
                            <button type="submit" class="button" style="width: 100%;">üîê Anmelden</button>
                        </form>
                        <p style="color: var(--text-secondary); margin-top: 12px; font-size: 0.85rem;">
                            Noch kein Konto? <a href="#" id="togglePasswordRegisterBtn"
                                style="color: var(--accent-teal); cursor: pointer;">Jetzt registrieren</a>
                        </p>
                        <div id="passwordStatus" class="status-message" role="alert" aria-live="polite"></div>
                    </div>

                    <!-- REGISTRATION FORM (Hidden by default) -->
                    <div id="passwordRegisterForm" style="display: none;">
                        <form id="passwordRegisterFormElement" novalidate>
                            <div class="form-group">
                                <label for="regUsername">Benutzername</label>
                                <input type="text" id="regUsername" placeholder="dein_name" required
                                    class="form-control" aria-required="true">
                                <small style="color: var(--text-secondary);">3-20 Zeichen, alphanumerisch</small>
                            </div>
                            <div class="form-group">
                                <label for="regEmail">E-Mail-Adresse</label>
                                <input type="email" id="regEmail" placeholder="deine@email.com" required
                                    class="form-control" aria-required="true">
                            </div>
                            <div class="form-group">
                                <label for="regPassword">Passwort</label>
                                <input type="password" id="regPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required
                                    class="form-control" aria-required="true">
                                <small style="color: var(--text-secondary);">Mindestens 8 Zeichen</small>
                            </div>
                            <div class="form-group">
                                <label for="regPasswordConfirm">Passwort wiederholen</label>
                                <input type="password" id="regPasswordConfirm" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required
                                    class="form-control" aria-required="true">
                            </div>
                            <button type="submit" class="button" style="width: 100%; background: var(--accent-teal);">‚úÖ
                                Registrieren</button>
                            <button type="button" id="cancelPasswordRegisterBtn" class="button"
                                style="width: 100%; margin-top: 8px; background: var(--text-secondary);">‚ùå
                                Abbrechen</button>
                        </form>
                        <div id="registerStatus" class="status-message" role="alert" aria-live="polite"></div>
                    </div>
                </div>

                <!-- Magic Link Tab -->
                <div id="magic-link-tab" class="tab-content" role="tabpanel" aria-labelledby="tab-magic">
                    <div class="form-group">
                        <label for="magicEmail">E-Mail-Adresse</label>
                        <input type="email" id="magicEmail" placeholder="ihre@email.com" class="form-control"
                            aria-label="E-Mail-Adresse" aria-required="true">
                    </div>
                    <button class="button" id="magicLinkBtn" style="width: 100%;">üìß Anmeldelink senden</button>
                    <div id="magicStatus" class="status-message" role="alert" aria-live="polite"></div>

                    <!-- Manual Magic Link Verification -->
                    <div
                        style="margin-top: 24px; padding-top: 24px; border-top: 1px solid var(--accent-teal); opacity: 0.8;">
                        <p style="color: var(--text-secondary); font-size: 0.85rem; margin-bottom: 12px;">
                            üìå Oder gib den Token manuell ein:
                        </p>
                        <div class="form-group">
                            <label for="magicToken">Verifikations-Token</label>
                            <input type="text" id="magicToken" placeholder="Token aus der E-Mail einf√ºgen..."
                                class="form-control" aria-label="Magic Link Token" aria-required="false">
                        </div>
                        <button class="button" id="magicVerifyBtn"
                            style="width: 100%; background: var(--accent-teal);">‚úÖ Token
                            verifizieren</button>
                    </div>
                    <div id="magicVerifyStatus" class="status-message" role="alert" aria-live="polite"></div>
                </div>
            </div>
        </div>

        <!-- ====================================================================
             üéµ FEATURED TRACKS
             ==================================================================== -->
        <section class="featured-section" aria-labelledby="tracks-heading">
            <h2 id="tracks-heading">üéµ Beliebte Tracks</h2>
            <p class="section-subtitle">Musik, keine Anmeldung erforderlich. 40 Sekunden Vorschau f√ºr
                Premium-Tracks.</p>
            <div id="tracksList" class="track-grid" role="region" aria-label="Beliebte Tracks" aria-live="polite"
                aria-busy="true">
                <div class="card" style="grid-column: 1/-1; text-align: center;">
                    <p style="color: var(--text-secondary);">‚è≥ Tracks werden geladen...</p>
                </div>
            </div>
        </section>

        <!-- ====================================================================
             üìù BLOG PREVIEW
             ==================================================================== -->
        <section class="blog-section" aria-labelledby="blog-heading">
            <h2 id="blog-heading">üìù Neueste aus dem Blog</h2>
            <div id="blogList" class="blog-grid" role="region" aria-label="Blog-Beitr√§ge" aria-live="polite"
                aria-busy="true">
                <div class="card" style="grid-column: 1/-1; text-align: center;">
                    <p style="color: var(--text-secondary);">‚è≥ Blog-Beitr√§ge werden geladen...</p>
                </div>
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <a href="blog/" class="button" aria-label="Alle Blog-Beitr√§ge anzeigen">üìñ Alle Beitr√§ge ‚Üí</a>
            </div>
        </section>

    </main>

    <!-- ========================================================================
         FOOTER
         ======================================================================== -->
    <footer role="contentinfo">
        <div class="footer-content">
            <div class="footer-section">
                <h3>üéµ SONG-NEXUS</h3>
                <p>Kostenlose, werbefreie Musikstreaming ohne Tracking.</p>
            </div>
            <div class="footer-section">
                <h3>Links</h3>
                <ul>
                    <li><a href="/" aria-label="Zur Startseite">Startseite</a></li>
                    <li><a href="blog/" aria-label="Zum Blog">Blog</a></li>
                    <li><a href="/docs/" aria-label="Zur Dokumentation">Dokumentation</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Rechtlich</h3>
                <ul>
                    <li><a href="/LICENSE" aria-label="Lizenzinformationen">Lizenz</a></li>
                    <li><a href="https://github.com/Waschtl904/song-nexus" aria-label="GitHub Repository"
                            rel="noopener noreferrer" target="_blank">GitHub</a></li>
                    <li><a href="/privacy-policy/" aria-label="Datenschutzerkl√§rung">Datenschutz</a></li>
                </ul>
            </div>
        </div>
        <p style="text-align: center; color: var(--text-secondary); font-size: 0.75rem; margin-top: 20px;">
            üéµ SONG-NEXUS v8.0 ES6 Modules ‚Ä¢ Gebaut mit ‚ù§Ô∏è ‚Ä¢ ¬© 2025 Sebastian | ‚ôø WCAG 2.2 Barrierefrei |
            <span style="color: var(--accent-green);">üç™ Keine Cookies ‚Ä¢ üìä Kein Tracking</span>
        </p>
    </footer>

    <!-- ========================================================================
         üé® DESIGN-SYSTEM LOADER (Runs BEFORE bundle!) - FIXED!
         ======================================================================== -->
    <script>
        // ============================================================================
        // üé® LADE DESIGN-SYSTEM UND WENDE FARBEN/BILDER AN
        // ============================================================================

        async function loadDesignSystem() {
            try {
                console.log('üé® Loading design system...');

                // ‚úÖ FIXED: Use relative URL to same origin
                // Frontend is on 5500, Backend is on 3000
                // But Backend serves frontend files from /dist
                // So we can call Backend API directly via /api/design-system

                const apiUrl = '/api/design-system';  // ‚úÖ RELATIVE URL - Same Origin!
                console.log('üåê Fetching from:', apiUrl);

                const response = await fetch(apiUrl, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    credentials: 'include',
                    mode: 'cors'
                });

                console.log('üìä Response status:', response.status);

                if (!response.ok) {
                    throw new Error(`Design system API error: ${response.status} ${response.statusText}`);
                }

                // Verify JSON
                const contentType = response.headers.get('content-type');
                if (!contentType || !contentType.includes('application/json')) {
                    const text = await response.text();
                    console.error('‚ö†Ô∏è Response was not JSON:', text.substring(0, 200));
                    throw new Error(`Expected JSON, got ${contentType}`);
                }

                const ds = await response.json();
                console.log('‚úÖ Design system loaded:', ds);

                // ============================================================================
                // üé® ERSTELLE CSS-VARIABLEN AUS DER DATENBANK
                // ============================================================================

                const cssVariables = `
                    :root {
                        --color-primary: ${ds.color_primary || '#00CC77'};
                        --color-secondary: ${ds.color_secondary || '#5E5240'};
                        --color-accent-teal: ${ds.color_accent_teal || '#32B8C6'};
                        --color-accent-green: ${ds.color_accent_green || '#22C55E'};
                        --color-accent-red: ${ds.color_accent_red || '#FF5459'};
                        --color-text-primary: ${ds.color_text_primary || '#1A1F2E'};
                        --color-background: ${ds.color_background || '#FCF8F9'};
                        --font-family-base: ${ds.font_family_base || 'Inter, sans-serif'};
                        --font-size-base: ${ds.font_size_base || 14}px;
                        --button-padding: ${ds.button_padding || '10px 20px'};
                        --border-radius: ${ds.border_radius || 8}px;
                        --spacing-unit: ${ds.spacing_unit || 8}px;
                    }
                    
                    /* ============================================================ */
                    /* üé® HERO BACKGROUND (aus Database) */
                    /* ============================================================ */
                    #heroBackground {
                        ${ds.background_image_url ? `
                            background-image: url('${ds.background_image_url}');
                            background-size: cover;
                            background-position: center;
                            background-attachment: fixed;
                        ` : ''}
                    }
                    
                    /* ============================================================ */
                    /* üéµ PLAYER BACKGROUND (aus Database) */
                    /* ============================================================ */
                    #stickyPlayer {
                        ${ds.player_background_image_url ? `
                            background-image: url('${ds.player_background_image_url}');
                            background-size: cover;
                            background-position: center;
                        ` : ''}
                    }
                    
                    /* ============================================================ */
                    /* üè∑Ô∏è LOGO (aus Database) */
                    /* ============================================================ */
                    #neonSign {
                        ${ds.logo_url ? `
                            background-image: url('${ds.logo_url}');
                            background-size: contain;
                            background-repeat: no-repeat;
                        ` : ''}
                    }
                `;

                // ============================================================================
                // üíâ INJIZIERE CSS IN DIE SEITE
                // ============================================================================

                const styleElement = document.getElementById('design-system-styles');
                if (styleElement) {
                    styleElement.textContent = cssVariables;
                    console.log('‚úÖ Design system CSS injected');
                } else {
                    console.error('‚ùå Design system style element not found!');
                }

            } catch (err) {
                console.error('‚ùå Error loading design system:', err);
                console.warn('‚ö†Ô∏è Using default colors (CSS fallback)');
            }
        }

        // ============================================================================
        // üöÄ LADE DESIGN-SYSTEM SOFORT (VOR Bundle!)
        // ============================================================================

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', loadDesignSystem);
        } else {
            // DOM already loaded
            loadDesignSystem();
        }
    </script>

    <!-- ========================================================================
         ‚úÖ FINAL: WEBPACK BUNDLE (SINGLE REQUEST - ALL 11 MODULES!)
         ======================================================================== -->
    <script src="./dist/app.bundle.js"></script>

    <!-- ========================================================================
         ‚úÖ MAGIC LINK HANDLER (Runs after bundle loads)
         ======================================================================== -->
    <script>
        console.log('üîê Checking current URL for Magic Link:', window.location.pathname);

        if (window.location.pathname === '/auth/magic-link' ||
            window.location.pathname.includes('auth/magic-link')) {

            console.log('üîêüîêüîê MAGIC LINK PAGE DETECTED! üîêüîêüîê');

            // Wait for scripts to load
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', async () => {
                    console.log('üîê DOM loaded, calling Auth.verifyMagicLinkFromUrl()...');
                    if (typeof Auth !== 'undefined' && Auth.verifyMagicLinkFromUrl) {
                        try {
                            const result = await Auth.verifyMagicLinkFromUrl();
                            console.log('‚úÖ Magic link result:', result);
                        } catch (err) {
                            console.error('‚ùå Magic link verification failed:', err);
                        }
                    } else {
                        console.error('‚ùå Auth module not loaded yet!');
                    }
                });
            } else {
                // DOM already loaded
                setTimeout(async () => {
                    console.log('üîê DOM already loaded, calling Auth.verifyMagicLinkFromUrl()...');
                    if (typeof Auth !== 'undefined' && Auth.verifyMagicLinkFromUrl) {
                        try {
                            const result = await Auth.verifyMagicLinkFromUrl();
                            console.log('‚úÖ Magic link result:', result);
                        } catch (err) {
                            console.error('‚ùå Magic link verification failed:', err);
                        }
                    }
                }, 500);
            }
        }
    </script>

</body>

</html>